---
layout: project
permalink: /:title/
category: projects
published: true

meta:
  keywords: "ROS"

project:
  title: "EKF SLAM on a Turtlebot3"
  type: "Jekyll"
  url: "https://github.com/ME495-Navigation/nuturtle-katie-hughes"
  logo: "/assets/images/projects/slam/transparent-SlamPath.png"
  tech: "ROS2, C++, SLAM"

7pieces: ST-r9X2dZMg
10pieces: pXBVbCDGRMg
slam: XY5Pn1EOWlA
---

In this project, I implemented extended Kalman filter SLAM from scratch on a Turtlebot3. 

<br>

{% include youtubePlayer.html id=page.slam %}


<br>

# Low Level Control

I created a C++ library to handle 2D transformation matrix math and the forward and inverse kinematics of a differential drive robot. This assists with converting a desired robot `cmd_vel` into wheel commands, as well as converting updates to encoder readings into a new robot position.

<br>

# Localization and Mapping

I performed online extended Kalman filter SLAM with discrete features. This keeps track of a robot state in 2D ($$x, y, \theta$$) and $$n$$ map locations, which are represented as cylinders centered at some ($$m_{xi}, m_{yi}$$). More details of the implementation are described <a href="https://nu-msr.github.io/navigation_site/lectures/slam/slam.pdf" target="_blank"><u>here</u></a>. On each iteration, I make a prediction of the new robot state and covariance based on odometry estimates. Then, for each obstacle measurement I see, I update my predicition of the map, robot state, and robot covariance. This is able to outperform odometry alone when noise is added in simulation, and also in real life. 

<br>

# Perception Pipeline

First, I performed usupervised clustering of lidar data. This groups together lidar points that are within a certain threshold of each other. 

<br>

Next, I performed circle regression and circle classification on these clusters. This computes <a href="https://projecteuclid.org/journals/electronic-journal-of-statistics/volume-3/issue-none/Error-analysis-for-circle-fitting-algorithms/10.1214/09-EJS419.full" target="_blank"><u>the center and radius of a circle in 2D</u></a>, and determines whether it should be considered as a circle by both radius filtering and <a href="https://ieeexplore.ieee.org/document/1570721" target="_blank"><u>Inscribed Angle Variance</u></a>. 

<br>

Finally, I performed data association. This determines whether a detected circle should be classified as a new map object, or should be associated with an obstacle that has already been seen. To accomplish this, I calculate the Mahalanobis distance from the robot to each of the previously initialized obstaces and find the minimum. If this minimum is greater than some threshold, then it is a new obstacle, otherwise it belongs to the object with the minimum Mahalanobis distance. 

<br><br>

<!-- {% include youtubePlayer.html id=page.10pieces %} -->

